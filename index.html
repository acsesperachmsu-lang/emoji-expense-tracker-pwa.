<!DOCTYPE html>
<html lang="hil">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#c4b5fd">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="EsnoPera">
  <title>EsnoPera</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="EsnoPera_192x192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <!-- Main Screen -->
    <header class="header">
      <h1 class="header-title">ğŸ’° EsnoPera</h1>
      <div class="header-actions">
        <button type="button" class="btn-header-icon" id="viewInsightsBtn" aria-label="Insights">ğŸ“Š Stats</button>
        <button type="button" class="btn-header-icon" id="viewHistoryBtn" aria-label="Lista">ğŸ“‹ Lista ko</button>
      </div>
    </header>

    <!-- Balance Section (balance + add money only) -->
    <section class="balance-section">
      <p class="balance-label">Bilhin nga kwarta</p>
      <p class="balance-amount" id="balanceDisplay">â‚±0</p>
      <button type="button" class="btn btn-allowance" id="addMoneyBtn">Dugang kwarta</button>
    </section>

    <!-- Quick Add -->
    <section class="quick-add-section">
      <h2 class="quick-add-title">Dali lang i-add</h2>
      <div class="quick-add-grid" id="quickAddGrid">
        <!-- Filled by script from preset list -->
      </div>
    </section>

    <!-- Custom + Borrow (same size as quick add) -->
    <section class="action-row">
      <button type="button" class="quick-add-btn action-chip" id="addExpenseBtn">
        <span class="quick-add-emoji">â•</span>
        <span class="quick-add-label">Iba pa nga gasto</span>
      </button>
      <button type="button" class="quick-add-btn action-chip action-chip-borrow" id="addBorrowBtn">
        <span class="quick-add-emoji">ğŸ¤</span>
        <span class="quick-add-label">I-add utang</span>
      </button>
    </section>

    <!-- Add Money Modal -->
    <div class="modal" id="addMoneyModal">
      <div class="modal-content">
        <h2>Dugang kwarta</h2>
        <p class="modal-hint">Diin halin ni nga kwarta kag pila? (e.g. allowance, sweldo)</p>
        <input type="text" id="incomeEmoji" placeholder="Emoji (e.g. ğŸ’¸)" maxlength="4">
        <input type="text" id="incomeName" placeholder="Ngaran sang source (e.g. Allowance, Sweldo)">
        <input type="number" id="addMoneyInput" placeholder="Pila ang sulod? (â‚±)" min="0" step="0.01">
        <div class="modal-buttons">
          <button type="button" class="btn btn-outline" id="cancelAddMoney">Cancel</button>
          <button type="button" class="btn btn-primary" id="saveAddMoney">Save</button>
        </div>
      </div>
    </div>

    <!-- Add Expense Modal -->
    <div class="modal" id="expenseModal">
      <div class="modal-content modal-expense">
        <h2>I-add gasto</h2>
        <p class="modal-hint">Pwede mo usbon emoji/kahilan, tapos butang amount.</p>
        <input type="text" id="expenseEmoji" placeholder="Emoji" maxlength="4">
        <input type="text" id="expenseName" placeholder="Ngalan sang gasto (e.g. snacks)">
        <input type="text" id="expenseNote" placeholder="Optional: detalye (e.g. Jollibee, McDo, GrabFood)">
        <input type="number" id="expenseAmount" placeholder="Tag pila ni? (â‚±)" min="0" step="0.01" inputmode="decimal">
        <p class="expense-date-hint" id="expenseDateHint"></p>
        <div class="amount-chips" id="amountChips">
          <button type="button" class="chip" data-amount="50">â‚±50</button>
          <button type="button" class="chip" data-amount="100">â‚±100</button>
          <button type="button" class="chip" data-amount="150">â‚±150</button>
          <button type="button" class="chip" data-amount="200">â‚±200</button>
          <button type="button" class="chip" data-amount="300">â‚±300</button>
          <button type="button" class="chip" data-amount="500">â‚±500</button>
        </div>
        <div class="modal-buttons">
          <button type="button" class="btn btn-outline" id="cancelExpense">Cancel</button>
          <button type="button" class="btn btn-primary" id="saveExpense">Save</button>
        </div>
      </div>
    </div>

    <!-- Add Borrow Modal -->
    <div class="modal" id="borrowModal">
      <div class="modal-content">
        <h2>I-add utang</h2>
        <p class="modal-hint">Sin-o naghulam kwarta sa imo?</p>
        <input type="text" id="borrowEmoji" placeholder="Emoji (e.g. ğŸ¤)" maxlength="4">
        <input type="text" id="borrowPerson" placeholder="Ngaran (e.g. Juan)">
        <input type="number" id="borrowAmount" placeholder="Pila gid ginhulam? (e.g. 500)" min="0" step="0.01">
        <div class="modal-buttons">
          <button type="button" class="btn btn-outline" id="cancelBorrow">Cancel</button>
          <button type="button" class="btn btn-primary" id="saveBorrow">Save</button>
        </div>
      </div>
    </div>

    <!-- Record Payment Modal (partial payment for utang) -->
    <div class="modal" id="paymentModal">
      <div class="modal-content">
        <h2>Record bayad</h2>
        <p class="modal-hint" id="paymentModalHint">Pila iya ginbalik?</p>
        <input type="number" id="paymentAmountInput" placeholder="Pila ni nga bayad? (â‚±)" min="0" step="0.01">
        <div class="modal-buttons">
          <button type="button" class="btn btn-outline" id="cancelPayment">Cancel</button>
          <button type="button" class="btn btn-primary" id="savePayment">Save</button>
        </div>
      </div>
    </div>

    <!-- Insights Screen (separate page) -->
    <div class="overlay-screen" id="insightsScreen">
      <div class="overlay-header">
        <h2>ğŸ“Š Stats sang kwarta</h2>
        <button type="button" class="btn btn-close" id="closeInsights">âœ• Close</button>
      </div>
      <div class="insights-page-content">
        <div class="insights-stats" id="insightsStats"></div>
        <!-- Pie chart for category breakdown -->
        <div class="pie-chart-wrap" id="pieChartWrap">
          <canvas id="pieChart" width="280" height="280" aria-label="Pie chart sang gastos"></canvas>
          <div class="pie-tooltip" id="pieTooltip"></div>
        </div>
        <div class="pie-legend" id="pieLegend"></div>
        <div class="category-detail" id="categoryDetail"></div>
        <button type="button" class="btn btn-outline btn-reset" id="resetAppBtn">I-reset App (Clear data)</button>
      </div>
    </div>

    <!-- History Screen -->
    <div class="overlay-screen" id="historyScreen">
      <div class="overlay-header">
        <h2>ğŸ“‹ Lista sang tanan</h2>
        <button type="button" class="btn btn-close" id="closeHistory">âœ• Close</button>
      </div>
      <div class="history-daily-totals" id="historyDailyTotals">
        <!-- Filled by JavaScript (daily totals) -->
      </div>
      <div class="history-list" id="historyList">
        <!-- Filled by JavaScript -->
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
